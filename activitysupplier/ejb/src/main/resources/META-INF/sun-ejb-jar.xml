<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server
8.0 EJB 2.1//EN" "http://www.sun.com/software/appserver/dtds/sun-ejb-jar_2_1-0.dtd">
<sun-ejb-jar>
  <enterprise-beans>
    <name>ActivitySupplierJAR</name>
    <ejb>
      <ejb-name>ActivityPurchaseOrderBean</ejb-name>
      <jndi-name>ejb/local/activitysupplier/ActivityPurchaseOrder</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>ActivityDetailsBean</ejb-name>
      <jndi-name>ejb/local/activitysupplier/ActivityDetails</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>ActivityPOEndpointBean</ejb-name>
      <jndi-name>ActivityPOEndpointBean</jndi-name>

      <resource-ref> 
        <res-ref-name>jms/activity/QueueConnectionFactory</res-ref-name>   
        <jndi-name>jms/activity/QueueConnectionFactory</jndi-name>
         <default-resource-principal>  
           <name>guest</name>
           <password>guest</password>
         </default-resource-principal> 
      </resource-ref>
      <resource-env-ref>         
        <resource-env-ref-name>jms/activity/ActivityQueue</resource-env-ref-name>
        <jndi-name>jms/activity/ActivityQueue</jndi-name>
      </resource-env-ref>
      
      <bean-pool>
        <steady-pool-size>0</steady-pool-size>
        <resize-quantity>60</resize-quantity>
        <max-pool-size>60</max-pool-size>
        <pool-idle-timeout-in-seconds>900</pool-idle-timeout-in-seconds>
      </bean-pool>
      <webservice-endpoint>
        <port-component-name>ActivityPOIntfPort</port-component-name>
        <endpoint-address-uri>webservice/ActivityPOService</endpoint-address-uri>
        <login-config>
            <auth-method>CLIENT-CERT</auth-method>
        </login-config>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
      </webservice-endpoint>
    </ejb>
    <ejb>
      <ejb-name>ActivityMessageEJB</ejb-name>
      <jndi-name>jms/activity/ActivityQueue</jndi-name>
      <service-ref>
          <service-ref-name>service/WebServiceBroker</service-ref-name>
          <port-info>
             <service-endpoint-interface>
                com.sun.j2ee.blueprints.activitysupplier.pomessagebean.BrokerServiceIntf
             </service-endpoint-interface>
             <stub-property>
                <name>javax.xml.rpc.service.endpoint.address</name>
                <value>https://localhost:8181/webservice/WebServiceBroker</value>
             </stub-property>
          </port-info>
      </service-ref>
      <mdb-connection-factory>
          <jndi-name>jms/activity/QueueConnectionFactory</jndi-name>
      </mdb-connection-factory>
    </ejb>

    <cmp-resource>
      <jndi-name>jdbc/adventure/AdventureDB</jndi-name>
      <default-resource-principal>
        <name>APP</name>
        <password>APP</password>
      </default-resource-principal>
      <create-tables-at-deploy>true</create-tables-at-deploy>
      <drop-tables-at-undeploy>true</drop-tables-at-undeploy>
      <database-vendor-name>derby</database-vendor-name>   
    </cmp-resource>
  </enterprise-beans>
</sun-ejb-jar>
