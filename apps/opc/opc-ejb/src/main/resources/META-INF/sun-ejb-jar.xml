<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2004 Sun Microsystems, Inc.  All rights reserved.  You may not modify, use, reproduce, or distribute this software except in compliance with the terms of the License at: 
 http://adventurebuilder.dev.java.net/LICENSE.txt
 $Id: sun-ejb-jar.xml,v 1.9 2005/11/12 00:27:31 smitha Exp $ -->
<!DOCTYPE sun-ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server
8.0 EJB 2.1//EN" "http://www.sun.com/software/appserver/dtds/sun-ejb-jar_2_1-0.dtd">
<sun-ejb-jar>
  <enterprise-beans>
    <name>OrderProcessingCenterJAR</name>
    <ejb>
      <ejb-name>PurchaseOrderBean</ejb-name>
      <jndi-name>ejb/local/opc/po/PurchaseOrder</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>CreditCardBean</ejb-name>
      <jndi-name>ejb/local/opc/po/CreditCard</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>ActivityBean</ejb-name>
      <jndi-name>ejb/local/opc/po/Activity</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>TransportationBean</ejb-name>
      <jndi-name>ejb/local/opc/po/Transportation</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>ContactInfoBean</ejb-name>
      <jndi-name>ejb/local/opc/po/ContactInfo</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>AddressBean</ejb-name>
      <jndi-name>ejb/local/opc/po/Address</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>LodgingBean</ejb-name>
      <jndi-name>ejb/local/opc/po/Lodging</jndi-name>
    </ejb>
    <ejb>
      <ejb-name>PoEndpointBean</ejb-name>
      <jndi-name>PoEndpointBean</jndi-name>
      <resource-ref> 
        <res-ref-name>jms/opc/QueueConnectionFactory</res-ref-name>   
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
         <default-resource-principal>  
           <name>guest</name>
           <password>guest</password>
         </default-resource-principal> 
      </resource-ref>
      <resource-env-ref>         
        <resource-env-ref-name>jms/opc/WorkFlowMgrQueue</resource-env-ref-name> 
        <jndi-name>jms/opc/WorkFlowMgrQueue</jndi-name>
      </resource-env-ref>
      <bean-pool>
        <steady-pool-size>0</steady-pool-size>
        <resize-quantity>60</resize-quantity>
        <max-pool-size>60</max-pool-size>
        <pool-idle-timeout-in-seconds>900</pool-idle-timeout-in-seconds>
      </bean-pool>
      <webservice-endpoint>
        <port-component-name>PurchaseOrderIntfPort</port-component-name>
        <endpoint-address-uri>webservice/PoEndpointBean</endpoint-address-uri>
      </webservice-endpoint>
    </ejb>
    <ejb>
      <ejb-name>BrokerServiceBean</ejb-name>
      <jndi-name>BrokerServiceBean</jndi-name>
      <resource-ref> 
        <res-ref-name>jms/opc/QueueConnectionFactory</res-ref-name>   
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
         <default-resource-principal>  
           <name>guest</name>
           <password>guest</password>
         </default-resource-principal> 
      </resource-ref>
      <resource-env-ref>         
        <resource-env-ref-name>jms/opc/WorkFlowMgrQueue</resource-env-ref-name> 
        <jndi-name>jms/opc/WorkFlowMgrQueue</jndi-name>
      </resource-env-ref>
      
      <bean-pool>
        <steady-pool-size>0</steady-pool-size>
        <resize-quantity>60</resize-quantity>
        <max-pool-size>60</max-pool-size>
        <pool-idle-timeout-in-seconds>900</pool-idle-timeout-in-seconds>
      </bean-pool>
      <webservice-endpoint>
        <port-component-name>BrokerServiceIntfPort</port-component-name>
        <endpoint-address-uri>webservice/WebServiceBroker</endpoint-address-uri>
        <login-config>
            <auth-method>CLIENT-CERT</auth-method>
        </login-config>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
      </webservice-endpoint>
    </ejb>
    <ejb>
      <ejb-name>OtEndpointBean</ejb-name>
      <jndi-name>OtEndpointBean</jndi-name>
      <bean-pool>
        <steady-pool-size>0</steady-pool-size>
        <resize-quantity>60</resize-quantity>
        <max-pool-size>60</max-pool-size>
        <pool-idle-timeout-in-seconds>900</pool-idle-timeout-in-seconds>
      </bean-pool>
      <webservice-endpoint>
        <port-component-name>OrderTrackingIntfPort</port-component-name>
        <endpoint-address-uri>webservice/OtEndpointBean</endpoint-address-uri>
      </webservice-endpoint>
    </ejb>
    <ejb>
      <ejb-name>WorkFlowManagerBean</ejb-name>   
      <jndi-name>jms/opc/WorkFlowMgrQueue</jndi-name>
      <resource-ref> 
        <res-ref-name>jms/opc/QueueConnectionFactory</res-ref-name>   
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
         <default-resource-principal>  
           <name>guest</name>
           <password>guest</password>
         </default-resource-principal> 
      </resource-ref>
      <resource-env-ref>         
        <resource-env-ref-name>jms/opc/OrderFillerQueue</resource-env-ref-name> 
        <jndi-name>jms/opc/OrderFillerQueue</jndi-name>
      </resource-env-ref>
      <resource-env-ref>         
        <resource-env-ref-name>jms/opc/CRMQueue</resource-env-ref-name> 
        <jndi-name>jms/opc/CRMQueue</jndi-name>
      </resource-env-ref>
      <service-ref>
          <service-ref-name>service/CreditCardService</service-ref-name>
          <port-info>
             <service-endpoint-interface>
                com.sun.j2ee.blueprints.opc.financial.CreditCardIntf
             </service-endpoint-interface>
             <stub-property>
                <name>javax.xml.rpc.service.endpoint.address</name>
                <value>https://localhost:8181/webservice/CreditCardService</value>
             </stub-property>
          </port-info>
      </service-ref>
      <mdb-connection-factory>    
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
      </mdb-connection-factory>
    </ejb>
    <ejb>
      <ejb-name>OrderFillerBean</ejb-name>   
      <jndi-name>jms/opc/OrderFillerQueue</jndi-name>
      <resource-ref> 
        <res-ref-name>jms/opc/QueueConnectionFactory</res-ref-name>   
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
         <default-resource-principal>  
           <name>guest</name>
           <password>guest</password>
         </default-resource-principal> 
      </resource-ref>
      <resource-env-ref>         
        <resource-env-ref-name>jms/opc/WebServiceBrokerQueue</resource-env-ref-name> 
        <jndi-name>jms/opc/WebServiceBrokerQueue</jndi-name>
      </resource-env-ref>
      <mdb-connection-factory>    
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
      </mdb-connection-factory>
    </ejb>
    <ejb>
      <ejb-name>BrokerRequestorBean</ejb-name>   
      <jndi-name>jms/opc/WebServiceBrokerQueue</jndi-name>
      <service-ref>
          <service-ref-name>service/ActivityPOService</service-ref-name>
          <port-info>
             <service-endpoint-interface>
                com.sun.j2ee.blueprints.opc.webservicebroker.requestor.ActivityPOIntf
             </service-endpoint-interface>
             <stub-property>
                <name>javax.xml.rpc.service.endpoint.address</name>
                <value>https://localhost:8181/webservice/ActivityPOService</value>
             </stub-property>
          </port-info>
      </service-ref>
      <service-ref>
          <service-ref-name>service/LodgingPOService</service-ref-name>
          <port-info>
             <service-endpoint-interface>
                com.sun.j2ee.blueprints.opc.webservicebroker.requestor.LodgingPOIntf
             </service-endpoint-interface>
             <stub-property>
                <name>javax.xml.rpc.service.endpoint.address</name>
                <value>https://localhost:8181/webservice/LodgingPOService</value>
             </stub-property>
          </port-info>
      </service-ref>
      <service-ref>
          <service-ref-name>service/AirlinePOService</service-ref-name>
          <port-info>
             <service-endpoint-interface>
                com.sun.j2ee.blueprints.opc.webservicebroker.requestor.AirlinePOIntf
             </service-endpoint-interface>
             <stub-property>
                <name>javax.xml.rpc.service.endpoint.address</name>
                <value>https://localhost:8181/webservice/AirlinePOService</value>
             </stub-property>
          </port-info>
      </service-ref>
      <mdb-connection-factory>    
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
      </mdb-connection-factory>
    </ejb>
    <ejb>
      <ejb-name>CRMBean</ejb-name>   
      <jndi-name>jms/opc/CRMQueue</jndi-name>
      <resource-ref>
        <res-ref-name>mail/MailSession</res-ref-name>
        <jndi-name>mail/opc/MailSession</jndi-name>
      </resource-ref>
      <mdb-connection-factory>    
        <jndi-name>jms/opc/QueueConnectionFactory</jndi-name>
      </mdb-connection-factory>
    </ejb>
    <cmp-resource>
      <jndi-name>jdbc/adventure/AdventureDB</jndi-name>
      <default-resource-principal>
        <name>APP</name>
        <password>APP</password>
      </default-resource-principal>
      <create-tables-at-deploy>true</create-tables-at-deploy>
      <drop-tables-at-undeploy>true</drop-tables-at-undeploy>
      <database-vendor-name>derby</database-vendor-name>      
    </cmp-resource>
  </enterprise-beans>
</sun-ejb-jar>
